<div *ngIf="(error$ | async) === null" class="search-results relative">
  <gn-ui-results-list
    [loading]="facade.isLoading$ | async"
    [records]="facade.results$ | async"
    [layoutConfig]="layoutConfig$ | async"
    [favoriteTemplate]="favoriteToggle"
    (mdSelect)="onMetadataSelection($event)"
  ></gn-ui-results-list>

  <ng-container *ngIf="(facade.isLoading$ | async) === false">
    <div class="show-more mt-[30px]" *ngIf="showMore === 'button'">
      <gn-ui-button
        type="secondary"
        (buttonClick)="onShowMore()"
        extraClass="lg:m-auto !p-[22px]"
      >
        <span class="uppercase font-medium tracking-widest" translate
          >results.showMore</span
        >
      </gn-ui-button>
    </div>
    <div
      class="show-more absolute inset-x-0 bottom-0 h-[2px]"
      *ngIf="showMore === 'auto'"
    >
      <gn-ui-viewport-intersector
        (entersViewport)="onShowMore()"
      ></gn-ui-viewport-intersector>
    </div>
  </ng-container>
</div>

<div class="p-4 w-80 m-auto text-[13px]">
  <gn-ui-search-results-error
    *ngIf="(errorCode$ | async) === 0"
    [type]="errorTypes.COULD_NOT_REACH_API"
  ></gn-ui-search-results-error>
  <gn-ui-search-results-error
    *ngIf="(error$ | async) !== null && (errorCode$ | async) !== 0"
    [type]="errorTypes.RECEIVED_ERROR"
    [error]="errorMessage$ | async"
  ></gn-ui-search-results-error>
</div>

<ng-template #favoriteToggle let-record>
  <gn-ui-favorite-star [record]="record"></gn-ui-favorite-star>
</ng-template>
